var BMapLib=window.BMapLib=BMapLib||{};!function(){function t(t,a,n){return null!=a&&(t=Math.max(t,a)),null!=n&&(t=Math.min(t,n)),t}function a(t,a,n){for(;t>n;)t-=n-a;for(;t<a;)t+=n-a;return t}var n=6370996.81,l=BMapLib.GeoUtils=function(){};l.isPointInRect=function(t,a){if(!(t instanceof BMap.Point&&a instanceof BMap.Bounds))return!1;var n=a.getSouthWest(),l=a.getNorthEast();return t.lng>=n.lng&&t.lng<=l.lng&&t.lat>=n.lat&&t.lat<=l.lat},l.isPointInCircle=function(t,a){if(!(t instanceof BMap.Point&&a instanceof BMap.Circle))return!1;var n=a.getCenter(),e=a.getRadius(),i=l.getDistance(t,n);return i<=e},l.isPointOnPolyline=function(t,a){if(!(t instanceof BMap.Point&&a instanceof BMap.Polyline))return!1;var n=a.getBounds();if(!this.isPointInRect(t,n))return!1;for(var l=a.getPath(),e=0;e<l.length-1;e++){var i=l[e],r=l[e+1];if(t.lng>=Math.min(i.lng,r.lng)&&t.lng<=Math.max(i.lng,r.lng)&&t.lat>=Math.min(i.lat,r.lat)&&t.lat<=Math.max(i.lat,r.lat)){var o=(i.lng-t.lng)*(r.lat-t.lat)-(r.lng-t.lng)*(i.lat-t.lat);if(o<2e-10&&o>-2e-10)return!0}}return!1},l.isPointInPolygon=function(t,a){if(!(t instanceof BMap.Point&&a instanceof BMap.Polygon))return!1;var n=a.getBounds();if(!this.isPointInRect(t,n))return!1;var l,e,i=a.getPath(),r=i.length,o=!0,M=0,g=2e-10,h=t;l=i[0];for(var s=1;s<=r;++s){if(h.equals(l))return o;if(e=i[s%r],h.lat<Math.min(l.lat,e.lat)||h.lat>Math.max(l.lat,e.lat))l=e;else{if(h.lat>Math.min(l.lat,e.lat)&&h.lat<Math.max(l.lat,e.lat)){if(h.lng<=Math.max(l.lng,e.lng)){if(l.lat==e.lat&&h.lng>=Math.min(l.lng,e.lng))return o;if(l.lng==e.lng){if(l.lng==h.lng)return o;++M}else{var f=(h.lat-l.lat)*(e.lng-l.lng)/(e.lat-l.lat)+l.lng;if(Math.abs(h.lng-f)<g)return o;h.lng<f&&++M}}}else if(h.lat==e.lat&&h.lng<=e.lng){var c=i[(s+1)%r];h.lat>=Math.min(l.lat,c.lat)&&h.lat<=Math.max(l.lat,c.lat)?++M:M+=2}l=e}}return M%2!=0},l.degreeToRad=function(t){return Math.PI*t/180},l.radToDegree=function(t){return 180*t/Math.PI},l.getDistance=function(e,i){if(!(e instanceof BMap.Point&&i instanceof BMap.Point))return 0;e.lng=a(e.lng,-180,180),e.lat=t(e.lat,-74,74),i.lng=a(i.lng,-180,180),i.lat=t(i.lat,-74,74);var r,o,M,g;return r=l.degreeToRad(e.lng),M=l.degreeToRad(e.lat),o=l.degreeToRad(i.lng),g=l.degreeToRad(i.lat),n*Math.acos(Math.sin(M)*Math.sin(g)+Math.cos(M)*Math.cos(g)*Math.cos(o-r))},l.getPolylineDistance=function(t){if(t instanceof BMap.Polyline||t instanceof Array){var a;if(a=t instanceof BMap.Polyline?t.getPath():t,a.length<2)return 0;for(var n=0,e=0;e<a.length-1;e++){var i=a[e],r=a[e+1],o=l.getDistance(i,r);n+=o}return n}return 0},l.getPolygonArea=function(t){if(!(t instanceof BMap.Polygon||t instanceof Array))return 0;var a;if(a=t instanceof BMap.Polygon?t.getPath():t,a.length<3)return 0;for(var l=0,e=0,i=0,r=0,o=0,M=0,g=0,h=0,s=0,f=0,c=0,P=0,u=0,I=0,B=0,v=0,p=0,d=0,m=0,y=0,R=0,x=0,T=0,b=0,D=0,L=0,q=0,A=0,C=0,w=0,E=0,G=0,N=0,O=0,S=n,U=a.length,W=0;W<U;W++)0==W?(e=a[U-1].lng*Math.PI/180,i=a[U-1].lat*Math.PI/180,r=a[0].lng*Math.PI/180,o=a[0].lat*Math.PI/180,M=a[1].lng*Math.PI/180,g=a[1].lat*Math.PI/180):W==U-1?(e=a[U-2].lng*Math.PI/180,i=a[U-2].lat*Math.PI/180,r=a[U-1].lng*Math.PI/180,o=a[U-1].lat*Math.PI/180,M=a[0].lng*Math.PI/180,g=a[0].lat*Math.PI/180):(e=a[W-1].lng*Math.PI/180,i=a[W-1].lat*Math.PI/180,r=a[W].lng*Math.PI/180,o=a[W].lat*Math.PI/180,M=a[W+1].lng*Math.PI/180,g=a[W+1].lat*Math.PI/180),h=Math.cos(o)*Math.cos(r),s=Math.cos(o)*Math.sin(r),f=Math.sin(o),c=Math.cos(i)*Math.cos(e),P=Math.cos(i)*Math.sin(e),u=Math.sin(i),I=Math.cos(g)*Math.cos(M),B=Math.cos(g)*Math.sin(M),v=Math.sin(g),p=(h*h+s*s+f*f)/(h*c+s*P+f*u),d=(h*h+s*s+f*f)/(h*I+s*B+f*v),m=p*c-h,y=p*P-s,R=p*u-f,x=d*I-h,T=d*B-s,b=d*v-f,C=(x*m+T*y+b*R)/(Math.sqrt(x*x+T*T+b*b)*Math.sqrt(m*m+y*y+R*R)),C=Math.acos(C),D=T*R-b*y,L=0-(x*R-b*m),q=x*y-T*m,A=0!=h?D/h:0!=s?L/s:q/f,A>0?(w+=C,N++):(E+=C,G++);var j,k;return j=w+(2*Math.PI*G-E),k=2*Math.PI*N-w+E,O=w>E?j-(U-2)*Math.PI<1?j:k:k-(U-2)*Math.PI<1?k:j,l=(O-(U-2)*Math.PI)*S*S}}();